{% assign section_name = 'header' %}
{% assign section_id = section_name | append: '--' | append: section.id %}

{% assign menu_main = section.settings.menu_main | default: false %}

<div class="{{ section_name }}__main">

  <div class="{{ section_name }}__brand">
    <a href="/" target="_self" title="Home">
      {% render 'svg', type: 'brand.logo.circle' %}
    </a>
  </div>

  {% if menu_main %}
    <nav class="{{ section_name }}__main-navigation navigation navigation--main" id="{{ section_name }}__navigation">
      <div class="navigation__list">
        {% for link in linklists[menu_main].links %}

          {% assign nav_active = link.active | default: false %}
          {% assign nav_title = link.title | default: '' %}
          {% assign nav_url = link.url | default: '' %}

          <div class="navigation__item">
            <a class="navigation__link" href="{{ nav_url }}">{{ nav_title }}</a>
            {% if link.links.size > 0 %}

              {% comment %} Sub Navigation {% endcomment %}
              <div class="sub-navigation">
                <div class="sub-navigation__wrapper">
                  <div class="sub-navigation__list">
                  {% for sub_link in link.links %}

                    {% assign sub_nav_active = sub_link.active | default: false %}
                    {% assign sub_nav_title = sub_link.title | default: '' %}
                    {% assign sub_nav_url = sub_link.url | default: '' %}
                    {% assign sub_nav_has_links = false %}
                    {% if sub_link.links.size > 0 %}
                      {% assign sub_nav_has_links = true %}
                    {% endif %}

                    <div class="sub-navigation__item{% if sub_nav_has_links %} has-links{% endif %}">
                      <a class="sub-navigation__link" href="{{ sub_nav_url }}">{{ sub_nav_title }}</a>
                      {% if sub_nav_has_links %}


                        {% comment %} Sub Sub Navigation {% endcomment %}
                        <div class="sub-sub-navigation">
                          {% for sub_sub_link in sub_link.links %}

                            {% assign sub_sub_nav_active = sub_sub_link.active | default: false %}
                            {% assign sub_sub_nav_title = sub_sub_link.title | default: '' %}
                            {% assign sub_sub_nav_url = sub_sub_link.url | default: '' %}

                            <div class="sub-sub-navigation__item">
                              <a class="sub-navigation__link" href="{{ sub_sub_nav_url }}">{{ sub_sub_nav_title }}</a>
                            </div>

                          {% endfor %}
                        </div>


                      {% endif %}
                    </div>

                  {% endfor %}
                </div>
                </div>
              </div>
            {% endif %}
          </div>

        {% endfor %}
      </div>
    </nav>
  {% endif %}

  <nav class="{{ section_name }}__cart-navigation d-none">
    <div class="navigation__item cart">
      <a class="navigation__link link" href="/cart" title="Cart">
        <span class="link__icon">{% render 'svg', type: 'icon.cart' %}</span>
        <span class="link__title js--cart-items-total">({{ cart.item_count }})</span>
      </a>
    </div>
  </nav>

  <button class="{{ section_name }}__button button d-lg-none js--mobile-menu-trigger" type="button">
    <span class="button__title">Menu</span>
    <span class="button__icon">{% render 'svg', type: 'icon.plus' %}</span>
  </button>

</div>

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}

{% schema %}
  {
    "name": "Header",
    "tag": "header",
    "class": "header",
    "settings": [
      {
        "content": "Navigation",
        "type": "header"
      },
      {
        "label": "Main Menu",
        "type": "link_list",
        "id": "menu_main"
      }
    ],
	  "blocks": []
  }
{% endschema %}
